---
import BaseLayout from "../../layouts/BaseLayout.astro";

const posts = await Astro.glob("./*.md");

posts.sort(
  (a, b) =>
    new Date(b.frontmatter.date).getTime() -
    new Date(a.frontmatter.date).getTime()
);
---

<BaseLayout 
  title="News & Tour Â· City and Colour"
  description="News and tour updates about City and Colour"
>
  <main class="news-hero">
    <div class="news-hero-image-layer">
      <img
        src="/images/dallas5.jpg"
        alt="City and Colour stage lights"
        class="news-hero-image"
      />
    </div>

    <div class="news-hero-overlay"></div>

    <div class="news-hero-content">
      <header class="news-hero-header">
        <h1 class="news-heading">News &amp; Tour</h1>
        <p class="news-subheading">
         Updates and tour notes created for this project.
        </p>
      </header>

      <section class="news-grid">
        {posts.map((post, index) => (
          <a href={post.url} class="news-card">
            <div class="news-card-image">
              {post.frontmatter.heroImage && (
                <img
                  src={post.frontmatter.heroImage}
                  alt={post.frontmatter.title}
                />
              )}
            </div>

            <div class="news-card-content">
              <p class="news-card-date">{post.frontmatter.date}</p>
              <h2 class="news-card-title">{post.frontmatter.title}</h2>

              {post.frontmatter.excerpt && (
                <p class="news-card-excerpt">{post.frontmatter.excerpt}</p>
              )}
            </div>
          </a>
        ))}
      </section>
    </div>
  </main>
</BaseLayout>
